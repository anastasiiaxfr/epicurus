document.addEventListener('DOMContentLoaded',function(){let _=document.querySelector('.navbar-toggler'),X=document.querySelector('.navbar-toggler-open'),V=document.querySelector('.navbar-toggler-close');_.addEventListener('click',function(){V.classList.toggle('d-block'),X.classList.toggle('d-none')});let t=document.querySelector('.toc__header'),T=document.querySelector('.toc__body');t&&t.addEventListener('click',function(){this.firstElementChild.classList.toggle('active'),T.classList.toggle('d-block')});function r(c){let b=document.querySelector(c),d='';document.querySelectorAll(`${c} li`).forEach(a=>{d+=a.textContent+'\n'});let a=document.createElement('span');a.classList.add('copy'),a.textContent='Copy all IPs',b&&b.parentNode.insertBefore(a,b.nextSibling),a.addEventListener('click',async()=>{a.classList.toggle('active'),b.classList.toggle('active');try{await navigator.clipboard.writeText(d)}catch(a){console.error('Failed to copy: ',a)}})}r('#p4 + ul'),r('#p3 + ul');function d(d,e,b){var c="",a;b&&(a=new Date,a.setTime(a.getTime()+b*24*60*60*1e3),c="; expires="+a.toUTCString()),document.cookie=d+"="+(e||"")+c+"; path=/"}function f(e){for(var c=e+"=",d=document.cookie.split(";"),b=0,a;b<d.length;b++){for(a=d[b];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(c)==0)return a.substring(c.length,a.length)}return null}function a(a){document.cookie=a+"=; Max-Age=-99999999;"}f("theme")==="white"?($("body").addClass("white"),$(".switch input[type=checkbox]").prop("checked",!0)):($("body").removeClass("white"),$(".switch input[type=checkbox]").prop("checked",!1)),$(".switch input[type=checkbox]").change(function(){$(this).is(":checked")?($("body").addClass("white").removeClass("dark"),d("theme","white",365)):($("body").removeClass("white").addClass("dark"),a("theme"),d("theme","dark",365))});const P={apiKey,authDomain,databaseURL,projectId,storageBucket,messagingSenderId,appId},ad=firebase.initializeApp(P),I=firebase.auth(),H=(a,b)=>{I.signInWithEmailAndPassword(a,b).then(a=>{const b=a.user;alert("User signed in:",b),u(!0)}).catch(a=>{const b=a.code,c=a.message;console.error("Sign-in error:",b,c),u(!1)})},E=document.querySelector('head').dataset.sp_addressbook_id,D=document.querySelector('head').dataset.sp_id,C=document.querySelector('head').dataset.sp_secret;function B(){const a={grant_type:"client_credentials",client_id:D,client_secret:C},b={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(a)};fetch('https://api.sendpulse.com/oauth/access_token',b).then(a=>a.json()).then(a=>d("access_token",a.access_token,1/4)).catch(a=>console.error(a))}const A=`https://api.sendpulse.com/addressbooks/${E}/emails`,s={emails:[]};B();let z=f("access_token");function y(){d("form_send",!0,1/4),fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify(s)}).then(a=>a.json()).then(a=>{console.log(a),S()}).catch(a=>console.error(a))}const J=document.querySelectorAll(".needs-validation");(function(){"use strict";Array.prototype.slice.call(J).forEach(function(a){a.addEventListener("submit",function(b){if(a.classList.add("was-validated"),a.checkValidity()){{const b=a.querySelector('input[type="email"]'),c=a.querySelector('input[type="password"]');if(b&&c){const a={email:b.value,variables:{password:c.value}};s.emails.push(a),y()}}}else b.preventDefault(),b.stopPropagation()},!1)})})();const w=document.querySelector(".from-validation"),ab=document.querySelector(".from-validation .btn");w.addEventListener("submit",function(a){if(this.closest(".from-validation").classList.add("was-validated"),this.checkValidity()){{a.preventDefault(),a.stopPropagation();const b=this.closest(".from-validation").querySelector('input[type="email"]'),c=this.closest(".from-validation").querySelector('input[type="password"]');if(b&&c){let a=b.value,d=c.value;H(a,d)}}}else a.preventDefault(),a.stopPropagation()},!1);const n=document.querySelector("#reg_password"),j=document.querySelector("#login_password"),h=document.querySelector("#reset_password"),b=document.querySelector("#reg_password_confirm");let k;function o(a){a.target.value==(n.value||j.value||h.value)?(k=!0,a.target.closest(".modal-row").querySelector(".invalid-feedback").classList.add("d-none"),a.target.classList.remove("is-invalid"),a.target.setCustomValidity("")):(a.target.closest(".modal-row").querySelector(".invalid-feedback").classList.remove("d-none"),k=!1,a.target.setCustomValidity("Invalid input"))}function g(a){k=!1,b.value="",b.closest(".modal-row").querySelector(".invalid-feedback").classList.remove("d-none"),a.target.validity.valid&&a.target.closest(".modal-row").querySelector(".invalid-feedback").classList.add("d-none")}b&&b.addEventListener("input",function(a){o(a)}),b&&b.addEventListener("change",function(a){o(a)}),n&&n.addEventListener("input",function(a){g(a)}),j&&j.addEventListener("input",function(a){g(a)}),h&&h.addEventListener("input",function(a){g(a)});const F=document.querySelectorAll('form input[type="checkbox"]');F.forEach(function(a){a.addEventListener("change",function(){const a=this.closest(".modal-row").querySelector(".invalid-feedback");this.checked?a.classList.add("d-none"):a.classList.remove("d-none")})});const G=document.querySelectorAll(".form-control:not([type=password])");G.forEach(a=>{a.addEventListener("input",function(){const b=a.closest(".modal-row").querySelector(".invalid-feedback");a.validity.valid&&b.classList.add("d-none")})});const m=document.querySelector("#modalSignIn"),q=m.querySelector(".invalid-feedback-login"),p=m.querySelectorAll("input"),K=document.querySelector("#modalLoginSuccess"),aa=K.querySelector(".btn");function M(){m.querySelector("input").validity.valid,q.classList.remove("d-block"),p.forEach(a=>{a.setCustomValidity(""),a.classList.remove("is-invalid")}),window.location.href="https://www.google.com/"}function Y(){q.classList.add("d-block"),p.forEach(a=>{a.setCustomValidity("Invalid input"),a.classList.add("is-invalid")})}function u(a){a===!0?M():a===!1&&Y()}const e=document.querySelector("#modalSuccessSend");let v=f("form_send"),R=e.querySelector(".modal-close");function S(){}v&&(v==="true"?e.classList.add('d-block','show'):e.classList.remove('d-block','show'),R.addEventListener('click',function(){a("form_send"),window.location.replace("/")}),e.addEventListener("click",function(b){a("form_send"),window.location.replace("/")}));const i=new URLSearchParams(window.location.search),U=i.get('email'),c=document.querySelector("#modalEmailClicked"),W=c.querySelector(".btn"),Q=c.querySelector(".modal-close");U==='checked'&&d("email_confirm","true",1);const N=f("email_confirm");N==="true"?c.classList.add('d-block','show'):(c.classList.remove('d-block','show'),a("email_confirm")),W.addEventListener('click',function(b){b.preventDefault(),a("email_confirm"),window.location.href="https://www.google.com/"}),Q.addEventListener('click',function(){a("email_confirm"),window.location.replace("/"),i.delete('email');const b=window.location.origin+window.location.pathname+'?'+i.toString();window.history.replaceState(null,null,b)}),c.addEventListener("click",function(b){b.target===c&&a("email_confirm")});const Z=document.querySelectorAll(".modal"),O=document.querySelectorAll('.modal [data-bs-toggle="modal"]'),L=document.querySelectorAll('[data-bs-toggle="modal"]'),x=document.querySelectorAll('.modal [data-bs-dismiss="modal"]'),ac=document.querySelector(".modal-content"),l=document.body;Z.forEach(function(a){a.addEventListener("click",function(a){a.target.closest(".modal-content")||(this.classList.add("d-none"),this.classList.remove("show"))})}),O.forEach(function(a){a.addEventListener("click",function(){const a=this.closest(".modal");a.classList.remove("show"),a.style.display="none";const b=document.querySelector(".modal-backdrop");b&&b.classList.add("d-none")})}),L.forEach(function(a){a.addEventListener("click",function(){const a=this.getAttribute("data-bs-target");document.querySelector(a).classList.add("show"),document.querySelector(a).style.display="block"})}),x.forEach(function(a){a.addEventListener("click",function(){const a=this.closest(".modal");a.classList.remove("show"),a.classList.remove("d-block"),l.classList.contains("modal-open")||(l.style.overflow="",l.style.paddingRight="")})})})